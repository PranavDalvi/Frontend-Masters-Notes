# Partitioning & Sharding
![](./attachments/Pasted%20image%2020260130204943.png)
- Your data fits on one server
- You need transactional guarantees
- Queries than span multiple table
![](./attachments/Pasted%20image%2020260130205129.png)
***
## Questions
1. **What is the key difference between partitioning and sharding in database design?**
	1. Partitioning is slicing data on the same machine/database, while sharding is slicing data across different machines/databases. Both involve dividing data based on some key to increase performance, but sharding implies distribution across multiple servers.
2. **What is a shard key and why is it important to choose it carefully?**
	1. A shard key is an arbitrary field used to determine how data is distributed across different sharded databases. It's critical to choose it carefully because if chosen incorrectly, data may not be evenly distributed, leading to some database clusters being overloaded while others are underutilized. For example, sharding by first name assumes names are evenly distributed across the alphabet, which may not be true.
3. **Why is partitioning typically done before sharding when scaling a relational database?**
	1. Partitioning is done first because it's simpler - it doesn't require adding another database or managing additional servers. You're just slicing the data differently within the same database to make queries faster. Only after hitting the limits of partitioning would you move to sharding, which adds complexity by distributing data across multiple machines.
4. **How does sharding in NoSQL databases differ from sharding in relational databases?**
	1. In NoSQL databases like MongoDB, sharding happens automatically and the database is built to horizontally scale as load increases. In relational databases, sharding must be manually implemented and carefully planned to maintain ACID compliance and transactional guarantees while scaling horizontally.
5. **What is a potential performance drawback when using sharding for databases with complex queries?**
	1. When queries need to span multiple tables that are distributed across different sharded databases, the performance will be slower than querying a single large machine. This is because the query must reach across multiple databases, which adds network overhead and complexity compared to accessing all data on one server.