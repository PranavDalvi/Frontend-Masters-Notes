# Authentication & Authorization Strategies

- Authentication: Verifies identity ("Who are you?")
- Authorization: Determines permissions ("What can you do?")

## Authentication
![](./attachments/Pasted%20image%2020260226115853.png)
- Common Methods
	- Username / password
	- Multi-factor authentication
	- OAuth / Social login
	- Biometrics
	- Certificate - based
	- Single Sign - On (SSO)

|Stateful|Stateless|
|---|---|
|Session - based|Token - based|
| Server stores session | client stores token |
| Fast invalidation | More complex invalidation |
- **Stateless is used for distributed system**
- Session - based
	- authenticate user
	- store authentication in memory (session)
	- validate session on each request
##  Authorization
- Auth Layers
	- API Gateway level
	- Service level
	- Database level
	- Object / data level
- Common token types
	- JWT
	- Session token s
	- API Keys
	- OAuth tokesn
- Client Storage
	- Cookies
	- Local / Session Storage
	- In Memory
## Questions
1. **What is the difference between authentication and authorization in system design?**
	1. Authentication is the process of verifying who someone is (e.g., through email and password to confirm identity). Authorization is verifying what someone is allowed to do and whether subsequent requests have the proper permissions. Authentication answers "Who are you?" while authorization answers "What are you allowed to do?"
2. **What is a sticky session and why does it occur when authentication is handled at the web server level?**
	1. A sticky session means that every request from a client must go to the same server every time. This occurs when authentication state is maintained on individual web servers rather than being shared between servers. The routing algorithm ensures requests are directed to the same server based on session ID or another parameter. This becomes problematic when scaling up or down, which is why authentication is better placed at the edge.
3. **What are the trade-offs between using short-lived JWT tokens versus session-based authentication?**
	1. Short-lived JWT tokens limit the time window a compromised token can be used (potentially 30 seconds to a couple minutes), but require more resources and frequent client reauthentication with refresh tokens. Session-based authentication is faster, can be deauthenticated quickly, and is more logical (sessions end when browser tabs close), but is more stateful and tied to specific servers.
4. **Why is stateless authentication preferred for distributed systems and microservices?**
	1. Stateless authentication allows systems to scale up and down easily without being tied to particular servers. If a server goes down, requests can automatically switch to another server. This is especially important in microservice architectures where services need to authenticate with each other. However, stateful authentication is easier to implement and allows for faster invalidation of credentials.
5. **What are the two main security approaches for microservice architectures, and what are their trade-offs?**
	1. The first approach is building a strong perimeter defense where once inside, users can move freely. This is easier to program but vulnerable to social engineering attacks, and breaches can go undetected. The second approach requires explicit permissions for every action with no implicit trust. This is more secure but heavier and more difficult to work with, requiring validation for every microservice request.